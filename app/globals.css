@import "tailwindcss";

@layer base {
  :root {
    /* Cyberpunk Arcade Palette - LES COULEURS SONT OK, MAIS VÉRIFIONS LES ACCENTS */
    --primary: 240 70% 50%; /* Uniformisation à un Bleu Électrique/Arcade clair */
    --primary-light: 240 70% 60%;
    --primary-dark: 240 70% 40%;

    /* Noir Profond #0F172A and variants for grays */
    --gray-50: 222 47 67;
    --gray-100: 222 47 60;
    --gray-200: 222 47 53;
    --gray-300: 222 47 46;
    --gray-400: 222 47 39;
    --gray-500: 222 47 32;
    --gray-600: 222 47 25;
    --gray-700: 222 47 18;
    --gray-800: 222 47 11; /* Main dark */
    --gray-900: 222 47 8; /* Background */
    --gray-950: 222 47 4; /* Deep background */

    /* Backgrounds */
    --background-light: 222 47 20;
    --background-dark: 222 47 12;

    /* ✅ FIX : Couleurs d'état Neon pour le feedback */
    --success: 140 100% 45%; /* Vert Neon/Terminal fort */
    --error: 0 100% 50%;     /* Rouge Vif/Critique */

    /* Accent as Bleu Néon */
    --accent: 240 70% 50%; /* Uniformisation à primary */
    --accent-light: 240 70% 60%;
    --accent-soft: 240 70% 40%;
  }

  html,
  body {
    max-width: 100vw;
    overflow-x: hidden;
    /* ✅ FIX CRITIQUE 1 : CONFORMITÉ FARCASTER/BASE UX (Swipe) */
    overscroll-behavior-y: none; /* Désactive le pull-to-refresh iOS */
    touch-action: pan-y;        /* Permet le scroll vertical, bloque le horizontal natif */
    -webkit-tap-highlight-color: transparent; /* Meilleure UX */
  }

  html {
    color-scheme: dark;
  }

  body {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    image-rendering: auto;
  }

  code {
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    font-family: var(--font-source-code-pro), monospace;
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem calc(0.25rem + 2px);
  }

  @media (prefers-color-scheme: dark) {
    code {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  }

  * {
    box-sizing: border-box;
    padding: 0;
    margin: 0;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  @media (prefers-color-scheme: dark) {
    html {
      color-scheme: dark;
    }
  }
}

/* Pixel Art Effects Layer */
@layer utilities {
  /* Global pixel art styling */
  .pixel-art {
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
  }

  /* Pixelated borders */
  .pixel-border {
    border-style: solid;
    border-image: none;
    border-radius: 0px;
  }

  /* Pixel corner effect for cards */
  .pixel-corner {
    border-radius: 0;
    border: 1px solid white;
    box-shadow: inset 1px 1px 0 0 rgba(255,255,255,0.5), inset -1px -1px 0 0 rgba(0,0,0,0.5);
  }

  /* Retro gradients */
  .pixel-gradient {
    background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)));
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
  }

  /* Block shadows */
  .pixel-shadow {
    box-shadow: 2px 2px 0 hsl(var(--gray-800));
  }

  /* Pixelated images */
  img, svg {
    image-rendering: pixelated;
  }

  /* Blocky buttons */
  .pixel-button {
    border: 2px solid hsl(var(--gray-50)); /* Bordure claire pour l'effet */
    border-radius: 0px;
    /* AJOUT : L'OMBRE DURE donne l'effet 3D */
    box-shadow: 4px 4px 0 0 black;
    transition: all 0.1s ease-out;
    min-height: 40px;
    padding: 8px 16px; /* Ajustement du padding */
  }

  .pixel-button:hover:not(:disabled) {
    /* L'enfoncement par translation simule la pression du bouton arcade */
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0 0 black; /* Ombre réduite à l'enfoncement */
  }

  /* Pixelated containers */
  .pixel-container {
    border: 2px solid white;
    border-radius: 0px;
    background: black;
    color: white;
    padding: 16px;
  }

  /* Retro text effects */
  .pixel-text {
    text-shadow:
      1px 0 0 hsl(var(--gray-800)),
      0 1px 0 hsl(var(--gray-800)),
      -1px 0 0 hsl(var(--gray-800)),
      0 -1px 0 hsl(var(--gray-800));
  }

  /* Pixelated backgrounds for sections */
  .pixel-bg {
    background-image:
      linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);
    background-size: 8px 8px;
  }

  /* Special pixel art filters */
  .pixel-filter {
    filter: contrast(1.2) brightness(1.1) saturate(0.8);
  }

  /* Retro CRT scanlines - optional effect */
  .retro-crt::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 4px,
      rgba(255, 255, 255, 0.01) 4px,
      rgba(255, 255, 255, 0.01) 6px
    );
    z-index: 9999;
  }

  /* Pixel perfect gradients - step by 2px */
  .pixel-gradient-green {
    background: repeating-linear-gradient(
      45deg,
      hsl(var(--primary)) 0px,
      hsl(var(--primary)) 2px,
      hsl(var(--accent)) 2px,
      hsl(var(--accent)) 4px
    );
  }

  /* Dithering pattern for extra retro feel */
  .pixel-dither {
    background-image:
      radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 2px, transparent 2px),
      radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 2px, transparent 2px);
    background-size: 4px 4px;
  }
}
